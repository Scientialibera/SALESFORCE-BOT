# =============================================================================
# SALESFORCE CHATBOT - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
# Copy this file to .env and fill in your actual values
# All configuration is done via environment variables for security and flexibility

# =============================================================================
# AZURE AUTHENTICATION
# =============================================================================
# When using DefaultAzureCredential, these are typically not needed
# The app will use managed identity, Azure CLI, or other credential sources
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret
# AZURE_TENANT_ID=your-tenant-id

# =============================================================================
# AZURE OPENAI CONFIGURATION
# =============================================================================
AZURE_OPENAI_ENDPOINT=https://your-openai-resource.openai.azure.com
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_CHAT_DEPLOYMENT_NAME=gpt-4o
AZURE_OPENAI_EMBEDDING_DEPLOYMENT_NAME=text-embedding-3-small
AZURE_OPENAI_MAX_TOKENS=4000
AZURE_OPENAI_TEMPERATURE=0.7
AZURE_OPENAI_TOP_P=0.9
AZURE_OPENAI_FREQUENCY_PENALTY=0.0
AZURE_OPENAI_PRESENCE_PENALTY=0.0

# =============================================================================
# COSMOS DB CONFIGURATION
# =============================================================================
COSMOS_DB_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/
COSMOS_DB_DATABASE_NAME=salesforce_chatbot
COSMOS_DB_CHAT_HISTORY_CONTAINER=chat_history
COSMOS_DB_AGENT_FUNCTIONS_CONTAINER=agent_functions
COSMOS_DB_CACHE_CONTAINER=cache
COSMOS_DB_FEEDBACK_CONTAINER=feedback
COSMOS_DB_PROMPTS_CONTAINER=prompts
COSMOS_DB_SQL_SCHEMA_CONTAINER=sql_schema
COSMOS_DB_MAX_RETRY_ATTEMPTS=3
COSMOS_DB_RETRY_DELAY_SECONDS=2
COSMOS_DB_REQUEST_TIMEOUT_SECONDS=30

# =============================================================================
# GREMLIN (GRAPH DATABASE) CONFIGURATION
# =============================================================================
GREMLIN_ENDPOINT=wss://your-graph-account.gremlin.cosmos.azure.com:443/
GREMLIN_DATABASE_NAME=salesforce_graph
GREMLIN_GRAPH_NAME=knowledge_graph
GREMLIN_USERNAME=/dbs/salesforce_graph/colls/knowledge_graph
GREMLIN_CONNECTION_POOL_SIZE=10
GREMLIN_MAX_RETRY_ATTEMPTS=3
GREMLIN_REQUEST_TIMEOUT_SECONDS=30

# =============================================================================
# SQL DATABASE CONFIGURATION (FABRIC/WAREHOUSE)
# =============================================================================
SQL_SERVER_NAME=your-fabric-workspace.datawarehouse.fabric.microsoft.com
SQL_DATABASE_NAME=your_warehouse_name
SQL_DRIVER=ODBC Driver 18 for SQL Server
SQL_CONNECTION_TIMEOUT_SECONDS=30
SQL_COMMAND_TIMEOUT_SECONDS=300
SQL_MAX_POOL_SIZE=20
SQL_ENCRYPT=true
SQL_TRUST_SERVER_CERTIFICATE=false

# =============================================================================
# RBAC (ROLE-BASED ACCESS CONTROL) CONFIGURATION
# =============================================================================
RBAC_JWT_ISSUER=https://sts.windows.net/your-tenant-id/
RBAC_JWT_AUDIENCE=your-application-id
RBAC_ADMIN_ROLES=Global Administrator,Application Administrator
RBAC_MANAGER_ROLES=Sales Manager,Account Manager
RBAC_USER_ROLES=Sales Representative,User
RBAC_DEFAULT_ROLE=User
RBAC_TOKEN_CACHE_TTL_SECONDS=3600

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=Salesforce Chatbot
APP_VERSION=1.0.0
APP_ENVIRONMENT=production
APP_LOG_LEVEL=INFO
APP_DEBUG=false
APP_HOST=0.0.0.0
APP_PORT=8000
APP_WORKERS=4
APP_API_PREFIX=/api/v1
APP_CORS_ORIGINS=https://your-frontend-domain.com,https://your-portal.com
APP_CORS_ALLOW_CREDENTIALS=true
APP_MAX_REQUEST_SIZE_MB=10

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
SECURITY_SECRET_KEY=your-super-secret-key-change-this-in-production
SECURITY_ACCESS_TOKEN_EXPIRE_MINUTES=60
SECURITY_ALGORITHM=HS256
SECURITY_ALLOWED_HOSTS=your-domain.com,*.your-domain.com
SECURITY_HTTPS_ONLY=true

# =============================================================================
# SEMANTIC KERNEL CONFIGURATION
# =============================================================================
SK_PLANNER_TYPE=sequential
SK_MAX_PLAN_STEPS=10
SK_PLAN_TIMEOUT_SECONDS=120
SK_FUNCTION_TIMEOUT_SECONDS=30
SK_MAX_TOKENS_PER_FUNCTION=1000
SK_ENABLE_TRACING=true

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
# SQL Agent
SQL_AGENT_NAME=sql_data_agent
SQL_AGENT_MAX_QUERY_COMPLEXITY=high
SQL_AGENT_ALLOWED_OPERATIONS=SELECT,WITH
SQL_AGENT_MAX_ROWS_RETURNED=1000
SQL_AGENT_QUERY_TIMEOUT_SECONDS=60

# Graph Agent  
GRAPH_AGENT_NAME=knowledge_graph_agent
GRAPH_AGENT_MAX_TRAVERSAL_DEPTH=5
GRAPH_AGENT_MAX_RESULTS_RETURNED=100
GRAPH_AGENT_QUERY_TIMEOUT_SECONDS=30

# Hybrid Agent
HYBRID_AGENT_NAME=hybrid_reasoning_agent
HYBRID_AGENT_SQL_WEIGHT=0.6
HYBRID_AGENT_GRAPH_WEIGHT=0.4
HYBRID_AGENT_CONFIDENCE_THRESHOLD=0.8

# =============================================================================
# ACCOUNT RESOLUTION CONFIGURATION
# =============================================================================
ACCOUNT_RESOLVER_CONFIDENCE_THRESHOLD=0.8
ACCOUNT_RESOLVER_MAX_SUGGESTIONS=3
ACCOUNT_RESOLVER_CACHE_TTL_SECONDS=3600
ACCOUNT_RESOLVER_EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
CACHE_DEFAULT_TTL_SECONDS=3600
CACHE_EMBEDDINGS_TTL_SECONDS=86400
CACHE_SCHEMA_TTL_SECONDS=7200
CACHE_PROMPTS_TTL_SECONDS=1800
CACHE_MAX_SIZE_MB=100

# =============================================================================
# TELEMETRY AND MONITORING
# =============================================================================
TELEMETRY_ENABLE_METRICS=true
TELEMETRY_ENABLE_TRACING=true
TELEMETRY_ENABLE_LOGGING=true
TELEMETRY_SAMPLING_RATE=0.1
TELEMETRY_SERVICE_NAME=salesforce-chatbot
TELEMETRY_SERVICE_VERSION=1.0.0

# Application Insights (if using Azure Monitor)
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://your-region.in.applicationinsights.azure.com/

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_ENABLED=true

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_TIMEOUT_SECONDS=5
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_COSMOS_ENABLED=true
HEALTH_CHECK_OPENAI_ENABLED=true
HEALTH_CHECK_SQL_ENABLED=true
HEALTH_CHECK_GREMLIN_ENABLED=true

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Container Apps specific
CONTAINER_APP_NAME=salesforce-chatbot
CONTAINER_APP_ENVIRONMENT=your-environment-name
CONTAINER_APP_RESOURCE_GROUP=your-resource-group
CONTAINER_APP_SUBSCRIPTION_ID=your-subscription-id

# Docker configuration
DOCKER_REGISTRY=your-registry.azurecr.io
DOCKER_IMAGE_NAME=salesforce-chatbot
DOCKER_IMAGE_TAG=latest

# =============================================================================
# DEVELOPMENT/TESTING SETTINGS (for local development only)
# =============================================================================
DEV_MOCK_AZURE_AUTH=false
DEV_MOCK_DATABASE=false
DEV_ENABLE_SWAGGER=true
DEV_ENABLE_DEBUG_ROUTES=false
DEV_CORS_ALLOW_ALL=false

# =============================================================================
# OPTIONAL: FEATURE FLAGS
# =============================================================================
FEATURE_ENABLE_FEEDBACK=true
FEATURE_ENABLE_ANALYTICS=true
FEATURE_ENABLE_CACHING=true
FEATURE_ENABLE_ACCOUNT_RESOLUTION=true
FEATURE_ENABLE_GRAPH_QUERIES=true
FEATURE_ENABLE_SQL_QUERIES=true
FEATURE_ENABLE_HYBRID_MODE=true

# =============================================================================
# OPTIONAL: EXTERNAL INTEGRATIONS
# =============================================================================
# SharePoint (for document indexing)
SHAREPOINT_SITE_URL=https://your-tenant.sharepoint.com/sites/your-site
SHAREPOINT_CLIENT_ID=your-sharepoint-app-id

# Power BI (for embedded reports)
POWERBI_CLIENT_ID=your-powerbi-app-id
POWERBI_WORKSPACE_ID=your-workspace-id

# Dynamics 365 (for CRM integration)
DYNAMICS_365_URL=https://your-org.crm.dynamics.com
DYNAMICS_365_CLIENT_ID=your-dynamics-app-id