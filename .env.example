# =============================================================================
# SALESFORCE CHATBOT - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
# Copy this file to .env and fill in your actual values
# All configuration is done via environment variables for security and flexibility

# =============================================================================
# AZURE AUTHENTICATION
# =============================================================================
# When using DefaultAzureCredential, these are typically not needed
# The app will use managed identity, Azure CLI, or other credential sources
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret
# AZURE_TENANT_ID=your-tenant-id

# =============================================================================
# AZURE OPENAI CONFIGURATION
# =============================================================================
AOAI_ENDPOINT=https://your-aoai.openai.azure.com/
AOAI_API_VERSION=2024-02-15-preview
AOAI_CHAT_DEPLOYMENT=gpt-4o
AOAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AOAI_EMBEDDING_DIMENSIONS=1536

# =============================================================================
# AZURE DOCUMENT INTELLIGENCE CONFIGURATION
# =============================================================================
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-document-intelligence.cognitiveservices.azure.com/
AZURE_DOCUMENT_INTELLIGENCE_API_VERSION=2024-11-30

# =============================================================================
# AZURE STORAGE CONFIGURATION
# =============================================================================
AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_CONTAINER_NAME=documents
AZURE_STORAGE_CACHE_CONTAINER=cache

# =============================================================================
# SHAREPOINT CONFIGURATION
# =============================================================================
SHAREPOINT_SITE_URL=https://your-tenant.sharepoint.com/sites/your-site
SHAREPOINT_LIBRARY_NAME=Documents
# SHAREPOINT_USERNAME=your-username (optional)
# SHAREPOINT_PASSWORD=your-password (optional)
# SHAREPOINT_CLIENT_ID=your-client-id (optional)
# SHAREPOINT_CLIENT_SECRET=your-client-secret (optional)

# =============================================================================
# DOCUMENT PROCESSING CONFIGURATION
# =============================================================================
BATCH_SIZE=100
MAX_CONCURRENT_REQUESTS=10
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_FILE_SIZE_MB=50
SUPPORTED_FILE_TYPES=pdf,docx,doc,txt,md
EXTRACT_TABLES=true
EXTRACT_IMAGES=false
OCR_ENABLED=true
LANGUAGE_DETECTION=true
SUPPORTED_LANGUAGES=en,es,fr,de,it

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
EMBEDDING_BATCH_SIZE=16
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_DELAY_SECONDS=5

# =============================================================================
# CHANGE DETECTION CONFIGURATION
# =============================================================================
CHECK_INTERVAL_MINUTES=60
ETAG_CACHE_TTL_HOURS=24
DELTA_PROCESSING_ENABLED=true

# =============================================================================
# VECTOR SEARCH CONFIGURATION
# =============================================================================
VECTOR_DIMENSIONS=1536
SIMILARITY_ALGORITHM=cosine
INDEX_REFRESH_INTERVAL_SECONDS=60

# =============================================================================
# GRAPH CONFIGURATION
# =============================================================================
GRAPH_BATCH_SIZE=50
GRAPH_MAX_RETRIES=3
RELATIONSHIP_TYPES=CONTAINS,REFERENCES,BELONGS_TO,SIMILAR_TO

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
SHAREPOINT_REQUESTS_PER_MINUTE=100
DOCUMENT_INTELLIGENCE_REQUESTS_PER_MINUTE=20
OPENAI_REQUESTS_PER_MINUTE=60

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_TTL_HOURS=24
METADATA_CACHE_TTL_HOURS=1
EMBEDDING_CACHE_TTL_DAYS=7

# =============================================================================
# RETRY CONFIGURATION
# =============================================================================
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2.0
RETRY_MAX_WAIT_SECONDS=60

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
ENABLE_DATA_ENCRYPTION=true
SANITIZE_CONTENT=true
REMOVE_PII=true
CONTENT_FILTER_ENABLED=true

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
MOCK_SHAREPOINT=false
MOCK_DOCUMENT_INTELLIGENCE=false
MOCK_EMBEDDINGS=false
TEST_DATA_PATH=./test_data
SAMPLE_PROCESSING_ONLY=false

# =============================================================================
# COSMOS DB CONFIGURATION (CHATBOT)
# =============================================================================
COSMOS_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/
COSMOS_DATABASE_NAME=appdb
COSMOS_CHAT_CONTAINER=chat_history
COSMOS_CACHE_CONTAINER=cache
COSMOS_FEEDBACK_CONTAINER=feedback
COSMOS_PROCESSED_FILES_CONTAINER=processed_files
COSMOS_PROMPTS_CONTAINER=prompts
COSMOS_SQL_SCHEMA_CONTAINER=sql_schema
COSMOS_ACCOUNT_RESOLVER_CONTAINER=account_resolver
COSMOS_AGENT_FUNCTIONS_CONTAINER=agent_functions

# =============================================================================
# AZURE COSMOS DB CONFIGURATION (INDEXER)
# =============================================================================
AZURE_COSMOS_PROCESSED_FILES_CONTAINER=processed_files
AZURE_COSMOS_JOBS_CONTAINER=jobs
AZURE_COSMOS_CONTRACTS_CONTAINER=contracts
AZURE_COSMOS_GREMLIN_ENDPOINT=your-cosmos-gremlin.gremlin.cosmos.azure.com
AZURE_COSMOS_GREMLIN_DATABASE=graphdb
AZURE_COSMOS_GREMLIN_GRAPH=relationships
AZURE_COSMOS_GREMLIN_PORT=443
AZURE_COSMOS_CACHE_CONTAINER=cache

# =============================================================================
# RBAC (ROLE-BASED ACCESS CONTROL) CONFIGURATION
# =============================================================================
RBAC_JWT_ISSUER=https://sts.windows.net/your-tenant-id/
RBAC_JWT_AUDIENCE=your-application-id
RBAC_ADMIN_ROLES=Global Administrator,Application Administrator
RBAC_MANAGER_ROLES=Sales Manager,Account Manager
RBAC_USER_ROLES=Sales Representative,User
RBAC_DEFAULT_ROLE=User
RBAC_TOKEN_CACHE_TTL_SECONDS=3600
RBAC_CACHE_TTL_MINUTES=30
RBAC_ENABLED=true
RBAC_ENFORCE_RBAC=false

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=Salesforce Chatbot
APP_VERSION=1.0.0
APP_ENVIRONMENT=production
APP_LOG_LEVEL=INFO
APP_DEBUG=false
APP_HOST=0.0.0.0
APP_PORT=8000
APP_WORKERS=4
APP_API_PREFIX=/api/v1
APP_CORS_ORIGINS=https://your-frontend-domain.com,https://your-portal.com
APP_CORS_ALLOW_CREDENTIALS=true
APP_MAX_REQUEST_SIZE_MB=10

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
SECURITY_SECRET_KEY=your-super-secret-key-change-this-in-production
SECURITY_ACCESS_TOKEN_EXPIRE_MINUTES=60
SECURITY_ALGORITHM=HS256
SECURITY_ALLOWED_HOSTS=your-domain.com,*.your-domain.com
SECURITY_HTTPS_ONLY=true
SECURITY_JWT_SECRET_KEY=dev-secret

# =============================================================================
# SEMANTIC KERNEL CONFIGURATION
# =============================================================================
SK_PLANNER_TYPE=sequential
SK_MAX_PLAN_STEPS=10
SK_PLAN_TIMEOUT_SECONDS=120
SK_FUNCTION_TIMEOUT_SECONDS=30
SK_MAX_TOKENS_PER_FUNCTION=1000
SK_ENABLE_TRACING=true
SK_MAX_TOKENS=4000
SK_TEMPERATURE=0.1

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
# SQL Agent
SQL_AGENT_NAME=sql_data_agent
SQL_AGENT_MAX_QUERY_COMPLEXITY=high
SQL_AGENT_ALLOWED_OPERATIONS=SELECT,WITH, JOIN, WHERE, GROUP BY, ORDER BY, HAVING
SQL_AGENT_MAX_ROWS_RETURNED=1000
SQL_AGENT_QUERY_TIMEOUT_SECONDS=60
SQL_MAX_ROWS=1000
SQL_QUERY_TIMEOUT_SECONDS=30

# Graph Agent  
GRAPH_AGENT_NAME=knowledge_graph_agent
GRAPH_AGENT_MAX_TRAVERSAL_DEPTH=5
GRAPH_AGENT_MAX_RESULTS_RETURNED=100
GRAPH_AGENT_QUERY_TIMEOUT_SECONDS=30
GRAPH_MAX_DEPTH=3
GRAPH_MAX_RESULTS=50

# Hybrid Agent
HYBRID_AGENT_NAME=hybrid_reasoning_agent
HYBRID_AGENT_SQL_WEIGHT=0.6
HYBRID_AGENT_GRAPH_WEIGHT=0.4
HYBRID_AGENT_CONFIDENCE_THRESHOLD=0.8

# =============================================================================
# ACCOUNT RESOLUTION CONFIGURATION
# =============================================================================
ACCOUNT_RESOLVER_CONFIDENCE_THRESHOLD=0.8
ACCOUNT_RESOLVER_MAX_SUGGESTIONS=3
ACCOUNT_RESOLVER_CACHE_TTL_SECONDS=3600
ACCOUNT_RESOLVER_EMBEDDING_MODEL=text-embedding-3-small
ACCOUNT_RESOLUTION_CONFIDENCE_THRESHOLD=0.8

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
CACHE_DEFAULT_TTL_SECONDS=3600
CACHE_EMBEDDINGS_TTL_SECONDS=86400
CACHE_SCHEMA_TTL_SECONDS=7200
CACHE_PROMPTS_TTL_SECONDS=1800
CACHE_MAX_SIZE_MB=100
CACHE_TTL_SECONDS=3600

# =============================================================================
# TELEMETRY AND MONITORING
# =============================================================================
TELEMETRY_ENABLE_METRICS=true
TELEMETRY_ENABLE_TRACING=true
TELEMETRY_ENABLE_LOGGING=true
TELEMETRY_SAMPLING_RATE=0.1
TELEMETRY_SERVICE_NAME=your-rg-name
TELEMETRY_SERVICE_VERSION=1.0.0
TELEMETRY_ENABLE_TELEMETRY=false

# Application Insights (if using Azure Monitor)
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://your-region.in.applicationinsights.azure.com/

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_ENABLED=true
RATE_LIMIT_BURST=10
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_TIMEOUT_SECONDS=5
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_COSMOS_ENABLED=true
HEALTH_CHECK_OPENAI_ENABLED=true
HEALTH_CHECK_SQL_ENABLED=true
HEALTH_CHECK_GREMLIN_ENABLED=true

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Container Apps specific
CONTAINER_APP_NAME=your-rg-name
CONTAINER_APP_ENVIRONMENT=your-environment-name
CONTAINER_APP_RESOURCE_GROUP=your-resource-group
CONTAINER_APP_SUBSCRIPTION_ID=your-subscription-id

# Docker configuration
DOCKER_REGISTRY=your-registry.azurecr.io
DOCKER_IMAGE_NAME=your-rg-name
DOCKER_IMAGE_TAG=latest

# =============================================================================
# DEVELOPMENT/TESTING SETTINGS (for local development only)
# =============================================================================
# Development settings
DEBUG_MODE=true
LOG_LEVEL=INFO
DEV_MODE=false
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true

# Testing configuration
TEST_DATABASE_URL=sqlite:///./test.db
TEST_AOAI_ENDPOINT=https://your-test-openai.openai.azure.com/
TEST_AOAI_KEY=your-test-openai-key
TEST_COSMOS_ENDPOINT=https://your-test-cosmos.documents.azure.com:443/
TEST_COSMOS_KEY=your-test-cosmos-key

# =============================================================================
# OPTIONAL: FEATURE FLAGS
# =============================================================================
# Enable/disable specific features
ENABLE_GRAPH_AGENT=true
ENABLE_SQL_AGENT=true
ENABLE_HYBRID_AGENT=true
ENABLE_PLANNER=true
ENABLE_CACHE=true
ENABLE_FEEDBACK=true
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_RATE_LIMITING=true
ENABLE_HEALTH_CHECKS=true

# =============================================================================
# OPTIONAL: EXTERNAL INTEGRATIONS
# =============================================================================
# SharePoint (for document indexing)
# SHAREPOINT_SITE_URL=https://your-tenant.sharepoint.com/sites/your-site
# SHAREPOINT_CLIENT_ID=your-sharepoint-app-id
# SHAREPOINT_CLIENT_SECRET=your-sharepoint-app-secret
# SHAREPOINT_TENANT_ID=your-tenant-id

# Power BI (for embedded reports)
# POWER_BI_CLIENT_ID=your-powerbi-app-id
# POWER_BI_CLIENT_SECRET=your-powerbi-app-secret
# POWER_BI_TENANT_ID=your-tenant-id
# POWER_BI_WORKSPACE_ID=your-workspace-id

# Dynamics 365 (for CRM integration)
# DYNAMICS_CLIENT_ID=your-dynamics-app-id
# DYNAMICS_CLIENT_SECRET=your-dynamics-app-secret
# DYNAMICS_TENANT_ID=your-tenant-id
# DYNAMICS_ORGANIZATION_URL=https://your-org.crm.dynamics.com

# Microsoft Fabric (for data lakehouse)
FABRIC_WORKSPACE_ID=your-fabric-workspace-id
FABRIC_SQL_ENDPOINT=https://your-workspace.fabric.microsoft.com/your-sql-endpoint
FABRIC_SQL_DATABASE=your-sql-database