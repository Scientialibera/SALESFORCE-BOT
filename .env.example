# =============================================================================
# SALESFORCE CHATBOT - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
# Copy this file to .env and fill in your actual values
# All configuration is done via environment variables for security and flexibility
# This file contains ONLY variables that are actually used in the codebase

# =============================================================================
# AZURE AUTHENTICATION
# =============================================================================
# Authentication is handled via DefaultAzureCredential (RBAC / Managed Identity).
# For local development, sign in with the Azure CLI (az login) or your IDE so
# DefaultAzureCredential can pick up your user credentials. We do not recommend
# storing client secrets in environment variables in this repository.

# =============================================================================
# AZURE OPENAI CONFIGURATION
# =============================================================================
AOAI_ENDPOINT=https://your-aoai.openai.azure.com/
AOAI_API_VERSION=2024-02-15-preview
AOAI_CHAT_DEPLOYMENT=gpt-4o
AOAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AOAI_EMBEDDING_DIMENSIONS=1536

# =============================================================================
# AZURE DOCUMENT INTELLIGENCE CONFIGURATION
# =============================================================================
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-document-intelligence.cognitiveservices.azure.com/
AZURE_DOCUMENT_INTELLIGENCE_API_VERSION=2024-11-30

# =============================================================================
# AZURE AI SEARCH CONFIGURATION
# =============================================================================
AZURE_SEARCH_ENDPOINT=https://your-search-service.search.windows.net
AZURE_SEARCH_INDEX=contracts-index
AZURE_SEARCH_API_VERSION=2024-07-01

# =============================================================================
# AZURE STORAGE CONFIGURATION
# =============================================================================
AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_CONTAINER_NAME=documents
AZURE_STORAGE_CACHE_CONTAINER=cache

# =============================================================================
# COSMOS DB CONFIGURATION (Unified Storage)
# =============================================================================
COSMOS_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/
COSMOS_DATABASE_NAME=appdb
# Unified container for sessions, messages, cache, and feedback
COSMOS_CHAT_CONTAINER=unified_data
# Essential containers for core functionality
COSMOS_PROMPTS_CONTAINER=prompts
COSMOS_SQL_SCHEMA_CONTAINER=sql_schema
COSMOS_AGENT_FUNCTIONS_CONTAINER=agent_functions

# =============================================================================
# AZURE COSMOS DB GREMLIN CONFIGURATION
# =============================================================================
AZURE_COSMOS_GREMLIN_ENDPOINT=your-cosmos-gremlin.gremlin.cosmos.azure.com
AZURE_COSMOS_GREMLIN_PORT=443
AZURE_COSMOS_GREMLIN_DATABASE=graphdb
AZURE_COSMOS_GREMLIN_GRAPH=account_graph
# Gremlin authentication uses DefaultAzureCredential / Managed Identity only

# =============================================================================
# SHAREPOINT CONFIGURATION
# =============================================================================
SHAREPOINT_SITE_URL=https://your-tenant.sharepoint.com/sites/your-site
SHAREPOINT_LIBRARY_NAME=Documents
SHAREPOINT_USERNAME=  # optional; prefer managed identity/configured pipeline permissions
# SHAREPOINT_PASSWORD=
# SHAREPOINT_CLIENT_ID=
# SHAREPOINT_CLIENT_SECRET=

# =============================================================================
# MICROSOFT FABRIC CONFIGURATION
# =============================================================================
FABRIC_WORKSPACE_ID=your-fabric-workspace-id
FABRIC_LAKEHOUSE_ID=your-lakehouse-id
FABRIC_SQL_ENDPOINT=https://your-workspace.fabric.microsoft.com/your-sql-endpoint
FABRIC_SQL_DATABASE=your-sql-database

# =============================================================================
# DOCUMENT PROCESSING CONFIGURATION
# =============================================================================
BATCH_SIZE=100
MAX_CONCURRENT_REQUESTS=10
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_FILE_SIZE_MB=50
SUPPORTED_FILE_TYPES=pdf,docx,doc,txt,md
EXTRACT_TABLES=true
EXTRACT_IMAGES=false
OCR_ENABLED=true
LANGUAGE_DETECTION=true
SUPPORTED_LANGUAGES=en,es,fr,de,it

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
EMBEDDING_BATCH_SIZE=16
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_DELAY_SECONDS=5

# =============================================================================
# CHANGE DETECTION CONFIGURATION
# =============================================================================
CHECK_INTERVAL_MINUTES=60
ETAG_CACHE_TTL_HOURS=24
DELTA_PROCESSING_ENABLED=true

# =============================================================================
# VECTOR SEARCH CONFIGURATION
# =============================================================================
VECTOR_DIMENSIONS=1536
SIMILARITY_ALGORITHM=cosine
INDEX_REFRESH_INTERVAL_SECONDS=60

# =============================================================================
# GRAPH CONFIGURATION
# =============================================================================
GRAPH_BATCH_SIZE=50
GRAPH_MAX_RETRIES=3
RELATIONSHIP_TYPES=CONTAINS,REFERENCES,BELONGS_TO,SIMILAR_TO

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
SHAREPOINT_REQUESTS_PER_MINUTE=100
DOCUMENT_INTELLIGENCE_REQUESTS_PER_MINUTE=20
OPENAI_REQUESTS_PER_MINUTE=60

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_TTL_HOURS=24
METADATA_CACHE_TTL_HOURS=1
EMBEDDING_CACHE_TTL_DAYS=7

# =============================================================================
# RETRY CONFIGURATION
# =============================================================================
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2.0
RETRY_MAX_WAIT_SECONDS=60

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
ENABLE_DATA_ENCRYPTION=true
SANITIZE_CONTENT=true
REMOVE_PII=true
CONTENT_FILTER_ENABLED=true

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
MOCK_SHAREPOINT=false
MOCK_DOCUMENT_INTELLIGENCE=false
MOCK_EMBEDDINGS=false
TEST_DATA_PATH=./test_data
SAMPLE_PROCESSING_ONLY=false

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=salesforce-chatbot
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=false

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_INTERVAL_SECONDS=30
DEPENDENCY_TIMEOUT_SECONDS=10

# =============================================================================
# CONTAINER APP CONFIGURATION
# =============================================================================
CONTAINER_APP_RESOURCE_GROUP=your-resource-group