# Core Application Settings
APP_NAME=salesforce-document-indexer
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=false

# Azure Authentication
# Leave blank to use DefaultAzureCredential (recommended). Do not store client secrets in the repo.

# Azure OpenAI (for embeddings)
AZURE_OPENAI_ENDPOINT=https://your-aoai.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
AZURE_OPENAI_EMBEDDING_DIMENSIONS=1536

# Azure Document Intelligence
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-doc-intel.cognitiveservices.azure.com/
AZURE_DOCUMENT_INTELLIGENCE_API_VERSION=2024-11-30

# Azure AI Search (Vector Store)
AZURE_SEARCH_ENDPOINT=https://your-search.search.windows.net
AZURE_SEARCH_INDEX=contracts-index
AZURE_SEARCH_API_VERSION=2024-07-01

# Azure Cosmos DB (SQL API for metadata and processing state)
AZURE_COSMOS_ENDPOINT=https://your-cosmos.documents.azure.com:443/
AZURE_COSMOS_DATABASE=indexer
AZURE_COSMOS_PROCESSED_FILES_CONTAINER=processed_files
AZURE_COSMOS_JOBS_CONTAINER=jobs
AZURE_COSMOS_CONTRACTS_CONTAINER=contracts_metadata

# Azure Cosmos DB (Gremlin API for graph relationships)
AZURE_COSMOS_GREMLIN_ENDPOINT=your-cosmos-gremlin.gremlin.cosmos.azure.com
AZURE_COSMOS_GREMLIN_PORT=443
AZURE_COSMOS_GREMLIN_DATABASE=contracts
AZURE_COSMOS_GREMLIN_GRAPH=relationships
# Gremlin authentication must use DefaultAzureCredential / Managed Identity. Do not set username/password here.
# AZURE_COSMOS_GREMLIN_USERNAME=  # not used
# AZURE_COSMOS_GREMLIN_PASSWORD=  # do NOT store keys in repo; use managed identity

# Microsoft Fabric / OneLake (Source data - Salesforce data ingested via pipelines)
FABRIC_WORKSPACE_ID=your-workspace-id
FABRIC_LAKEHOUSE_ID=your-lakehouse-id
FABRIC_SQL_ENDPOINT=your-workspace.datawarehouse.fabric.microsoft.com
FABRIC_SQL_DATABASE=your_lakehouse

# SharePoint Online
SHAREPOINT_SITE_URL=https://yourtenant.sharepoint.com/sites/contracts
SHAREPOINT_LIBRARY_NAME=Documents
SHAREPOINT_USERNAME=your-sp-username
SHAREPOINT_PASSWORD=your-sp-password
# Or use app-only authentication (recommended)
SHAREPOINT_CLIENT_ID=your-sp-app-id
SHAREPOINT_CLIENT_SECRET=your-sp-app-secret

# Azure Storage (for staging and caching)
AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_CONTAINER_NAME=indexer-staging
AZURE_STORAGE_CACHE_CONTAINER=indexer-cache

# Application Insights (Monitoring)
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://your-region.in.applicationinsights.azure.com/

# Processing Configuration
BATCH_SIZE=100
MAX_CONCURRENT_REQUESTS=10
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_FILE_SIZE_MB=50
SUPPORTED_FILE_TYPES=pdf,docx,doc,txt,md

# Embedding Configuration
EMBEDDING_BATCH_SIZE=16
EMBEDDING_MAX_RETRIES=3
EMBEDDING_RETRY_DELAY_SECONDS=5

# Document Processing
EXTRACT_TABLES=true
EXTRACT_IMAGES=false
OCR_ENABLED=true
LANGUAGE_DETECTION=true
SUPPORTED_LANGUAGES=en,es,fr,de,it

# Change Detection
CHECK_INTERVAL_MINUTES=60
ETAG_CACHE_TTL_HOURS=24
DELTA_PROCESSING_ENABLED=true

# Vector Search Configuration
VECTOR_DIMENSIONS=1536
SIMILARITY_ALGORITHM=cosine
INDEX_REFRESH_INTERVAL_SECONDS=60

# Graph Database Configuration
GRAPH_BATCH_SIZE=50
GRAPH_MAX_RETRIES=3
RELATIONSHIP_TYPES=CONTAINS,REFERENCES,BELONGS_TO,SIMILAR_TO

# Rate Limiting
SHAREPOINT_REQUESTS_PER_MINUTE=100
DOCUMENT_INTELLIGENCE_REQUESTS_PER_MINUTE=20
OPENAI_REQUESTS_PER_MINUTE=60

# Health Check
HEALTH_CHECK_INTERVAL_SECONDS=30
DEPENDENCY_TIMEOUT_SECONDS=10

# Cache Settings
CACHE_TTL_HOURS=24
METADATA_CACHE_TTL_HOURS=1
EMBEDDING_CACHE_TTL_DAYS=7

# Retry Configuration
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2.0
RETRY_MAX_WAIT_SECONDS=60

# Security
ENABLE_DATA_ENCRYPTION=true
SANITIZE_CONTENT=true
REMOVE_PII=true
CONTENT_FILTER_ENABLED=true

# Development/Testing
MOCK_SHAREPOINT=false
MOCK_DOCUMENT_INTELLIGENCE=false
MOCK_EMBEDDINGS=false
TEST_DATA_PATH=./test_data
SAMPLE_PROCESSING_ONLY=false